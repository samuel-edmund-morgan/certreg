body.admin-page .alert-banner {
  display: none !important;
}
:root{
  --bg:#ffffff; --text:#0f172a; --muted:#475569; --primary:#102d4e;
  --card:#ffffff; --border:#e2e8f0; --accent:#2563eb; --danger:#dc2626;

  /* Висота липкого хедера та банера для коректних offsets */
  --topbar-h: 96px;
  --alert-h: 36px; /* мінімальна висота банера; за потреби збільшіть */

}

*{box-sizing:border-box}
html,body{height:100%}
html{scroll-padding-top:var(--sticky-stack)}
/* Колонковий флекс для «прибитого» футера */
body{
  margin:0;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font:15px/1.5 'Montserrat', system-ui, 'Segoe UI', Roboto, Ubuntu;
  font-synthesis:none; /* prevent faux bold/italic to reduce flash weight shift */
}

/* Шрифти: використовуйте реальні ваги, щоб уникнути «тонких» кнопок */
@font-face{
  font-family:'Montserrat';
  src: local('Montserrat Light'), local('Montserrat-Light'),
       url('/fonts/Montserrat-Light.ttf') format('truetype');
  font-weight:300; font-style:normal; font-display:swap;
}
/* Додайте файл Montserrat-SemiBold.ttf у /fonts */
@font-face{
  font-family:'Montserrat';
  src: local('Montserrat SemiBold'), local('Montserrat-SemiBold'),
       url('/fonts/Montserrat-SemiBold.ttf') format('truetype');
  font-weight:600; font-style:normal; font-display:swap;
}

/* Основний контент розтягується */
main{flex:1}

/* Topbar */
.topbar{
  position:sticky;
  top:0;
  z-index:1100;
  background:var(--primary);
  color:#fff;
  /* logo-max залежить від загальної висоти хедера */
  --logo-max: calc(var(--topbar-h) - 24px);
  min-height:var(--topbar-h);
  height:var(--topbar-h);
  overflow:visible; /* щоб логотип не «різався» */
}
.topbar__inner{
  max-width:1200px;margin:0 auto;height:100%;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 28px
}
.brand{display:flex;align-items:center;gap:16px}
.logo{width:clamp(36px, 8vw, var(--logo-max));aspect-ratio:1/1;margin:0;max-height:var(--logo-max);max-width:var(--logo-max);border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden}
.logo img{width:100%;height:100%;object-fit:contain;display:block;border-radius:8px}
.title{font-weight:600;font-size:20px;line-height:1.05;white-space:pre-line;text-transform:uppercase;letter-spacing:.5px}

/* Layout */
.container{max-width:1200px;margin:18px auto;padding:0 16px}
.centered{
  display:flex;justify-content:center;align-items:center;
  min-height:auto;padding:3vh 0;
}
.centered--top{align-items:flex-start;padding-top:2vh;padding-bottom:14vh;} /* extra bottom space so fixed footer doesn't cover details */

/* Cards */
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 10px 20px rgba(16,45,78,.08);padding:20px;max-width:520px;width:100%}
.card--narrow{max-width:420px}
.card__logo{
  width:80px;height:80px;margin:0 auto 16px;background:transparent;border-radius:16px;
  display:flex;align-items:center;justify-content:center;overflow:hidden;
}
.card__logo .logo{
  width:80px !important;height:80px !important;max-width:none !important;max-height:none !important;
  margin:0 !important;border-radius:12px !important;background-size:contain !important;background-position:center !important;
}
.card__title{text-align:center;margin:2px 0 18px}
/* Дод. відступ перед центрованими діями у картці */
.card .text-center{margin-top:18px}

/* Forms & Buttons */
.form label{display:block;margin-bottom:10px}
.form input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px}
/* Do NOT force full width for checkbox / radio */
.form input[type=checkbox],
.form input[type=radio]{width:auto;padding:0;border:1px solid var(--border);border-radius:4px;}
#infiniteWrap{padding-left:4px;}
.form-inline{display:flex;gap:10px;flex-wrap:wrap}

.btn{border:1px solid var(--border);padding:8px 12px;border-radius:10px;background:#f8fafc;cursor:pointer;text-decoration:none}
.btn:hover{filter:brightness(.97);text-decoration:none}
.btn:focus-visible{outline:3px solid #93c5fd;outline-offset:2px}
.btn-primary{background:var(--primary);border-color:var(--primary);color:#fff}
.btn-light{background:#fff;color:var(--primary)}
.btn-success{background:#10b981;border-color:#10b981;color:#fff}
.btn-sm{padding:6px 10px;font-size:13px}
.text-right{text-align:right}
.text-center{text-align:center}

/* Кнопки в топбарі – реальний 600 вага + чітка типографіка */
.topbar__actions .btn{
  background:#fff;color:var(--primary);border:0;padding:0 16px;
  border-radius:10px;cursor:pointer;text-decoration:none;
  display:inline-flex;align-items:center;justify-content:center;gap:6px;
  font-size:15px;line-height:1;box-sizing:border-box;height:40px;
  width: var(--topbar-btn-width, auto);
  font-family:'Montserrat', system-ui, 'Segoe UI', Roboto, Ubuntu;
  font-weight:600; /* справжня вага з @font-face вище */
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  vertical-align:middle;
  font-synthesis: none; /* не синтезувати жирність, використовуємо справжню 600 */
}
.topbar__actions .btn:hover{background:#2f71bf;color:#fff;border-color:#2f71bf}
.topbar__actions .btn:focus-visible{outline:3px solid #bfdbfe;outline-offset:2px}

/* Форм-кнопка в топбарі */
.topbar__actions form{margin:0}
.topbar__actions form .btn{display:inline-flex;align-items:center;justify-content:center;padding:0 16px;height:40px;border-radius:10px}

/* Firefox внутрішній padding */
.topbar__actions button{font-family:inherit;font-weight:inherit}
.topbar__actions button::-moz-focus-inner{border:0;padding:0}

/* Tables */
.section{margin:20px 0}
.table-wrap{overflow:auto;border:1px solid var(--border);border-radius:12px}
.table{border-collapse:collapse;width:100%;min-width:720px}
.table th,.table td{padding:10px 12px;border-bottom:1px solid var(--border)}
.table thead th{background:#f1f5f9;text-align:left;position:sticky;top:0;z-index:1}

/* Alerts */
.alert{padding:10px 12px;border-radius:10px;background:#fff3cd;border:1px solid #ffe69c}
.alert-error{background:#ffe2e2;border-color:#ffc9c9;color:#7f1d1d}

/* ==== Alert banner: липкий під топбаром + безмиготливий marquee ==== */
.alert-banner{
  width:100%;
  min-width:0;
  background:#b91c1c;color:#fff;
  display:flex;align-items:center;overflow:hidden;box-sizing:border-box;
  margin:0;padding:0;border:0;
  position:sticky;top:var(--topbar-h);
  z-index:1000; /* нижче за топбар */
  min-height:var(--alert-h);
}
.alert-banner__marquee{
  display:flex;align-items:center;width:100%;min-width:0;
  max-width:1200px;margin:0 auto; /* центруємо контент, фон повний */
  overflow:hidden;
}
.alert-banner__track{
  display:flex;width:max-content;
  animation:alert-marquee 14s linear infinite;
  will-change:transform;
  backface-visibility:hidden;
  transform:translate3d(0,0,0);
}
.alert-banner__text{
  flex:none;display:inline-block;white-space:nowrap;
  font-weight:600;
  font-size:clamp(10px,1.6vw,14px);
  line-height:1.3;
  padding:0 2rem;
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  font-kerning:normal;
  font-feature-settings:"kern";
}
@keyframes alert-marquee{
  to{ transform: translate3d(-50%,0,0); } /* два однакові спани => -50% без розривів */
}
@media (prefers-reduced-motion: reduce){
  .alert-banner__track{ animation:none; transform:none; }
}

/* Pagination & misc */
.pagination{display:flex;gap:6px;margin-top:12px;justify-content:center}
.page{padding:6px 10px;border:1px solid var(--border);border-radius:10px;text-decoration:none;color:inherit}
.page.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.page-dots{padding:6px 10px;color:var(--muted)}
.inline{display:inline}
.btn-danger{background:var(--danger);border-color:var(--danger);color:#fff}
.btn-danger:hover{filter:brightness(.95)}

/* ==== Responsive ==== */
/* План: керуємо висотою хедера через змінну, а не явні height у .topbar */
@media (max-width: 768px){
  :root{ --topbar-h:88px; }
  .topbar__inner{padding:0 24px}
  .title{font-size:18px;line-height:1.08;}
  .topbar__actions .btn{height:38px}
}
@media (max-width: 414px){
  /* більше місця під лого */
  :root{ --topbar-h: 120px; } /* було 96px */

  /* лого тепер росте до межі (var(--topbar-h) - 24px) */
  .logo{
    width: clamp(90px, 26vw, calc(var(--topbar-h) - 24px));
  }
}
@media (max-width: 375px){
  :root{ --topbar-h:110px; }
  .topbar__inner{padding:0 16px;gap:12px}
  .title{
    font-size:15px;line-height:1.04;
    display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;line-clamp:3
  }
  .topbar__actions .btn{height:36px;padding:0 12px;font-size:14px}
}
@media (max-width: 320px){
  :root{ --topbar-h:120px; }
  .topbar__inner{padding:0 12px;gap:10px}
  .title{
    font-size:14px;line-height:1.02;
    display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;line-clamp:3
  }
  .topbar__actions .btn{height:34px;padding:0 10px;font-size:13px}
}

/* ==== Footer ==== */
.site-footer{
  --footer-bg: var(--primary);
  background:var(--footer-bg);color:#ffffff;
  padding:1rem 1.25rem;margin-top:2rem;
}
.site-footer__inner{
  max-width:1200px;margin:0 auto;
  display:flex;align-items:center;justify-content:space-between;gap:1rem;
  font-size:0.95rem;
}
.site-footer__left{font-weight:600}
.site-footer__right a{color:rgba(255,255,255,0.95);text-decoration:underline}

/* Mobile: фіксований футер + відступ під контент */
@media (max-width:520px){
  .site-footer__inner{flex-direction:column;align-items:flex-start}
  .site-footer__right{margin-top:.5rem}
  .site-footer{
    position:fixed;left:0;right:0;bottom:0;width:100%;z-index:50;
    border-top:1px solid rgba(255,255,255,0.06);
    padding:.75rem 1rem;
  }
  body{padding-bottom:72px}
}

  /* === Revocation status styles === */
  .badge{display:inline-block;padding:2px 6px;border-radius:6px;font-size:12px;line-height:1.2;font-weight:600}
  .badge-danger{background:#dc2626;color:#fff}
  .badge-success{background:#15803d;color:#fff}
  .row-revoked td{background:#fff1f1}

  /* Sortable table header links: force neutral styling across states */
  .table th a,
  .table th a:link,
  .table th a:visited{
    color:inherit !important;
    text-decoration:none !important;
    font-weight:600;
  }
  /* Tiny sort icon next to header text */
  .table th a .sort-icon{
    display:inline-block;
    width:12px; height:12px;
    margin-left:6px;
    vertical-align:middle;
  }
  .table th a:hover,
  .table th a:focus,
  .table th a:active{ text-decoration:underline dotted; color:inherit !important; }
  /* In case browser applies default focus outline, keep accessibility */
  .table th a.active{ font-weight:bold; color: #2563eb !important; }

  /* === Utility classes (CSP inline-style cleanup) === */
  .mt-0{margin-top:0}
  .mb-12{margin-bottom:12px}
  .mt-14{margin-top:14px}
  .mt-24{margin-top:24px}
  .mr-8{margin-right:8px}
  .flex{display:flex}
  .flex-wrap{flex-wrap:wrap}
  .gap-6{gap:6px}
  .gap-8{gap:8px}
  .align-start{align-items:flex-start}
  .align-center{align-items:center}
  .align-self-end{align-self:flex-end}
  .nowrap{white-space:nowrap}
  /* Expiry block layout */
  .expiry-row{display:flex;align-items:center;gap:14px;min-height:38px;flex-wrap:nowrap}
  .expiry-row .expiry-slot{transition:opacity .18s ease, visibility .18s ease;}
  .hidden-slot{opacity:0;visibility:hidden;pointer-events:none;position:relative}
  /* Reserve width so layout doesn't shift when showing date input */
  #validUntilWrap{width:170px}
  #validUntilWrap input[type=date]{width:100%;padding:8px 10px;border:1px solid var(--border);border-radius:10px;font-size:14px}
  .d-inline{display:inline-block}
  .d-none{display:none}
  .mono{font-family:monospace}
  .fs-11{font-size:11px}
  .fs-12{font-size:12px}
  .fs-13{font-size:13px}
  .fs-14{font-size:14px}
  .minw-200{min-width:200px}
  .maxw-760{max-width:760px}
  .link-plain{text-decoration:none;color:inherit}
  .filter-form{margin-bottom:12px;display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .details-grid{display:grid;grid-template-columns:160px 1fr;gap:12px;font-size:14px}
  .actions-row{display:flex;flex-wrap:wrap;gap:12px;align-items:flex-start}
  .flex-1{flex:1}
  .btn-ghost-danger{background:#64748b;color:#fff;border-color:#64748b}
  .alert-ok{background:#ecfdf5;border:1px solid #6ee7b7}
  /* Do not force casing on success message (name display uses JS title-casing) */
  #ownResult .alert-ok{ text-transform:none; }
  .ellipsis{max-width:200px;overflow:hidden;text-overflow:ellipsis}
  .badge-int{font-size:13px;user-select:all}
  .text-muted{color:var(--muted)}
  .text-success{color:#15803d}
  /* QR benchmark table (CSP-safe) */
  .qr-bench-head{border-bottom:1px solid silver}
  .qr-bench-title{text-align:center;font-weight:600}
  .qr-bench-label{text-align:right;white-space:nowrap}
  .qr-bench-total{border-top:2px solid #000}
  .my-18{margin:18px 0}
  .mt-10{margin-top:10px}
  .mt-18{margin-top:18px}
  .mb-0{margin-bottom:0}
  .fw-600{font-weight:600}
  .mb-12{margin-bottom:12px}
  .mb-8{margin-bottom:8px}
  .mt-8{margin-top:8px}
  .mt-4{margin-top:4px}
  .mt-2{margin-top:2px}
  .maxw-520{max-width:520px}
  .code-box{display:block;max-width:340px;white-space:pre-wrap;word-break:break-all;font-size:11px;background:#f1f5f9;padding:8px;border-radius:6px}
  .canvas-preview{border:1px solid #e2e8f0;border-radius:8px;max-width:100%;height:auto;display:block}
  .qr-img{width:220px;height:220px;border:1px solid #e2e8f0;border-radius:8px;object-fit:contain}
  /* Bulk bar sticky */
  .bulk-bar{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);padding:4px 10px;z-index:6;box-shadow:0 2px 4px rgba(0,0,0,0.04);min-height:40px;display:flex;align-items:center}
  body.admin-page .bulk-bar{top:0}
  /* When bulk bar visible adjust sticky header offset */
  body.has-bulk .table thead th{top:40px}
  .bulk-bar__inner{align-items:center}
  .row-selected td{background:#e0f2fe !important}
  /* Bulk bar reason field collapse logic */
  #bulkBar{gap:8px}
  #bulkReason{min-width:220px;}
  #bulkReason.hidden-slot{display:none !important}
  /* === Tabs for issuance page === */
  .tabs{display:flex;gap:4px;margin:10px 0 18px;border-bottom:1px solid var(--border)}
  .tab{background:#f1f5f9;border:1px solid var(--border);border-bottom:none;padding:8px 14px;border-top-left-radius:10px;border-top-right-radius:10px;cursor:pointer;font-weight:600;font-size:14px;position:relative;top:1px}
  .tab.active{background:#fff;border-color:var(--border);color:#000;box-shadow:0 2px 4px rgba(0,0,0,0.05)}
  .tab-panel{padding:2px 4px 8px 2px}
  .tab-panel.d-none{display:none !important}
  .bulk-table-wrapper{border:1px solid var(--border);border-radius:12px;padding:10px;background:#fff}
  #bulkTable input{width:100%;padding:6px 8px;border:1px solid var(--border);border-radius:8px;font-size:14px}
  #bulkTable td,#bulkTable th{vertical-align:top}
  .row-error input{border-color:#dc2626}
  .status-badge{display:inline-block;padding:2px 6px;border-radius:6px;font-size:11px;font-weight:600;line-height:1.2;background:#e2e8f0;color:#334155}
  .status-badge.ok{background:#10b981;color:#fff}
  .status-badge.err{background:#dc2626;color:#fff}
  .status-badge.proc{background:#2563eb;color:#fff}
  .token-chip{display:inline-block;background:#0f172a;color:#fff;padding:2px 6px;border-radius:6px;font-size:11px;font-family:monospace;margin:2px 4px 2px 0}
  #bulkResults code{font-size:12px}
  .fade-in{animation:fadeIn .3s ease}
  @keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
  /* Duplicate name highlight */
  #bulkTable tr.dup td input[name=name]{outline:2px solid #f59e0b;background:#fff8e1}
  #bulkTable tr.dup td:first-child{position:relative}
  #bulkTable tr.dup td:first-child:after{content:'dup';position:absolute;top:2px;right:2px;background:#f59e0b;color:#fff;font-size:9px;padding:1px 3px;border-radius:4px;letter-spacing:.5px}

  /* Progress bar */
  .progress-wrap{background:#e2e8f0;border-radius:6px;overflow:hidden;height:10px;position:relative}
  .progress-bar{background:#2563eb;height:100%;transition:width .25s ease}
  .progress-bar.done{background:#10b981}
  .progress-wrap{width:240px;max-width:100%}
  .progress-hidden{display:none}

  /* Bulk table column widths (replacing inline styles) */
  #bulkTable th.col-n{width:40px}
  #bulkTable th.col-grade{width:140px}
  #bulkTable th.col-status{width:110px}
  #bulkTable th.col-actions{width:54px}
