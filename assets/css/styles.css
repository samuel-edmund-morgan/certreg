body.admin-page .alert-banner {
  display:none; /* was !important, not needed given direct class selector */
}
:root{
  --bg:#ffffff; --text:#0f172a; --muted:#475569; --primary:#102d4e;
  --card:#ffffff; --border:#e2e8f0; --accent:#2563eb; --danger:#dc2626;

  /* Висота липкого хедера та банера для коректних offsets */
  --topbar-h: 96px;
  --alert-h: 36px; /* мінімальна висота банера; за потреби збільшіть */

}

*{box-sizing:border-box}
html,body{height:100%}
html{scroll-padding-top:var(--sticky-stack)}
/* Колонковий флекс для «прибитого» футера */
body{
  margin:0;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font:15px/1.5 'Montserrat', system-ui, 'Segoe UI', Roboto, Ubuntu;
  font-synthesis:none; /* prevent faux bold/italic to reduce flash weight shift */
}

/* Шрифти: використовуйте реальні ваги, щоб уникнути «тонких» кнопок */
@font-face{
  font-family:'Montserrat';
  src: local('Montserrat Light'), local('Montserrat-Light'),
       url('/fonts/Montserrat-Light.ttf') format('truetype');
  font-weight:300; font-style:normal; font-display:swap;
}
/* Додайте файл Montserrat-SemiBold.ttf у /fonts */
@font-face{
  font-family:'Montserrat';
  src: local('Montserrat SemiBold'), local('Montserrat-SemiBold'),
       url('/fonts/Montserrat-SemiBold.ttf') format('truetype');
  font-weight:600; font-style:normal; font-display:swap;
}

/* Основний контент розтягується */
main{flex:1}

/* Topbar */
.topbar{
  position:sticky;
  top:0;
  z-index:1100;
  background:var(--primary);
  color:#fff;
  /* logo-max залежить від загальної висоти хедера */
  --logo-max: calc(var(--topbar-h) - 24px);
  min-height:var(--topbar-h);
  height:var(--topbar-h);
  overflow:visible; /* щоб логотип не «різався» */
}
.topbar__inner{
  max-width:none; width:100%; margin:0 auto; height:100%;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 28px
}
.brand{display:flex;align-items:center;gap:16px;flex:1 1 auto;min-width:0}
.topbar__actions{margin-left:auto;display:flex;align-items:center;gap:8px;flex-wrap:nowrap;white-space:nowrap}
.logo{width:clamp(36px, 8vw, var(--logo-max));aspect-ratio:1/1;margin:0;max-height:var(--logo-max);max-width:var(--logo-max);border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden}
.logo img{width:100%;height:100%;object-fit:contain;display:block;border-radius:8px}
.title{font-weight:600;font-size:20px;line-height:1.05;white-space:pre-line;text-transform:uppercase;letter-spacing:.5px}
/* Prevent the title from forcing buttons to wrap; allow clipping on single line for extremely long names on narrow viewports */
.topbar__inner .title{max-width:100%;}
@media (max-width: 820px){ .topbar__inner .title{font-size:18px} }
@media (max-width: 700px){ .topbar__inner .title{font-size:16px} }
@media (max-width: 620px){ .topbar__inner .title{font-size:15px} }
@media (max-width: 560px){ .topbar__inner .title{font-size:14px} }

/* Layout */
.container{max-width:1200px;margin:18px auto;padding:0 16px}
.centered{
  display:flex;justify-content:center;align-items:center;
  min-height:auto;padding:3vh 0;
}
.centered--top{align-items:flex-start;padding-top:2vh;padding-bottom:14vh;} /* extra bottom space so fixed footer doesn't cover details */

/* Cards */
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 10px 20px rgba(16,45,78,.08);padding:20px;max-width:520px;width:100%}
.card--narrow{max-width:420px}
.card__logo{
  width:80px;height:80px;margin:0 auto 16px;background:transparent;border-radius:16px;
  display:flex;align-items:center;justify-content:center;overflow:hidden;
}
.card__logo .logo{
  width:80px;height:80px;max-width:none;max-height:none;
  margin:0;border-radius:12px;background-size:contain;background-position:center;
}
.card__title{text-align:center;margin:2px 0 18px}
/* Дод. відступ перед центрованими діями у картці */
.card .text-center{margin-top:18px}

/* Forms & Buttons */
.form label{display:block;margin-bottom:10px}
.form input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px}
/* Make selects look and behave like inputs, on their own line */
.form select{display:block;width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;font-size:14px}
.form select:focus{outline:3px solid var(--accent,#2563eb);outline-offset:1px}
/* Place hint text under the control, not inline */
.form label .text-muted{display:block;margin-top:4px}
/* Unified input appearance (also for settings grids) */
.input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;font-size:14px;background:#fff;line-height:1.2;}
.input:focus{outline:3px solid var(--accent,#2563eb);outline-offset:1px}
.input[type=file]{padding:6px 8px}
/* Do NOT force full width for checkbox / radio */
.form input[type=checkbox],
.form input[type=radio]{width:auto;padding:0;border:1px solid var(--border);border-radius:4px;}
#infiniteWrap{padding-left:4px;}
.form-inline{display:flex;gap:10px;flex-wrap:wrap}

.btn{border:1px solid var(--border);padding:8px 12px;border-radius:10px;background:#f8fafc;cursor:pointer;text-decoration:none}
.btn:hover{filter:brightness(.97);text-decoration:none}
/* Focus ring now uses accent for clearer theming */
.btn:focus-visible{outline:3px solid var(--accent,#2563eb);outline-offset:2px}
.btn-primary{background:var(--primary);border-color:var(--primary);color:#fff}
.btn-light{background:#fff;color:var(--secondary,var(--primary));border-color:var(--secondary,var(--primary))}
/* Deprecated: .btn-success now aliases accent (semantic green kept for status badges only) */
.btn-success{background:var(--accent,#2563eb);border-color:var(--accent,#2563eb);color:#fff}
/* New brand button variant leveraging secondary if provided */
.btn-secondary{background:var(--secondary,var(--primary));border-color:var(--secondary,var(--primary));color:#fff}
.btn-secondary:focus-visible{outline:3px solid var(--accent,#2563eb);outline-offset:2px}
.btn-secondary:hover,.btn-accent:hover,.btn-success:hover{filter:brightness(.92)}
.btn-sm{padding:6px 10px;font-size:13px}
.text-right{text-align:right}
.text-center{text-align:center}

/* Кнопки в топбарі – реальний 600 вага + чітка типографіка */
.topbar__actions .btn{
  background:#fff;color:var(--primary);border:0;padding:0 12px;
  border-radius:8px;cursor:pointer;text-decoration:none;
  display:inline-flex;align-items:center;justify-content:center;gap:6px;
  font-size:14px;line-height:1;box-sizing:border-box;height:36px;
  font-family:'Montserrat', system-ui, 'Segoe UI', Roboto, Ubuntu;
  font-weight:600;
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  vertical-align:middle;
  font-synthesis: none;
}
/* Topbar button interactions adopt accent */
.topbar__actions .btn:hover{background:var(--accent,#2563eb);color:#fff;border-color:var(--accent,#2563eb)}
.topbar__actions .btn:focus-visible{outline:3px solid var(--accent,#2563eb);outline-offset:2px}

/* Форм-кнопка в топбарі */
.topbar__actions form{margin:0}

/* Firefox внутрішній padding */
.topbar__actions button{font-family:inherit;font-weight:inherit}
.topbar__actions button::-moz-focus-inner{border:0;padding:0}

/* Tables */
.section{margin:20px 0}
.table-wrap{overflow:auto;border:1px solid var(--border);border-radius:12px}
.table-wrap-orgs{border-bottom:0;padding-bottom:2px}
.table{border-collapse:collapse;width:100%;min-width:720px}
.table th,.table td{padding:10px 12px;border-bottom:1px solid var(--border);vertical-align:middle}
.table#orgsTable td{line-height:1.25}
/* Continuous straight separators via collapsed table + row border */
.table-wrap-orgs{border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff;padding:0}
.table-wrap-orgs table{border-collapse:collapse;border-spacing:0;margin:0;width:100%}
.table-wrap-orgs #orgsTable tr{border-bottom:1px solid var(--border);}
.table-wrap-orgs #orgsTable tr:last-child{border-bottom:0}
.table-wrap-orgs #orgsTable th,
.table-wrap-orgs #orgsTable td{border:0;padding:12px 14px;}
.table thead th{background:#f1f5f9;text-align:left;position:sticky;top:0;z-index:1}

/* Alerts */
.alert{padding:10px 12px;border-radius:10px;background:#fff3cd;border:1px solid #ffe69c}
.alert-error{background:#ffe2e2;border-color:#ffc9c9;color:#7f1d1d}

/* ==== Alert banner: липкий під топбаром + безмиготливий marquee ==== */
.alert-banner{
  width:100%;
  min-width:0;
  background:#b91c1c;color:#fff;
  display:flex;align-items:center;overflow:hidden;box-sizing:border-box;
  margin:0;padding:0;border:0;
  position:sticky;top:var(--topbar-h);
  z-index:1000; /* нижче за топбар */
  min-height:var(--alert-h);
}
.alert-banner__marquee{
  display:flex;align-items:center;width:100%;min-width:0;
  max-width:1200px;margin:0 auto; /* центруємо контент, фон повний */
  overflow:hidden;
}
.alert-banner__track{
  display:flex;width:max-content;
  animation:alert-marquee 14s linear infinite;
  will-change:transform;
  backface-visibility:hidden;
  transform:translate3d(0,0,0);
}
.alert-banner__text{
  flex:none;display:inline-block;white-space:nowrap;
  font-weight:600;
  font-size:clamp(10px,1.6vw,14px);
  line-height:1.3;
  padding:0 2rem;
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  font-kerning:normal;
  font-feature-settings:"kern";
}
@keyframes alert-marquee{
  to{ transform: translate3d(-50%,0,0); } /* два однакові спани => -50% без розривів */
}
@media (prefers-reduced-motion: reduce){
  .alert-banner__track{ animation:none; transform:none; }
}

/* Pagination & misc */
.pagination{display:flex;gap:6px;margin-top:12px;justify-content:center}
.page{padding:6px 10px;border:1px solid var(--border);border-radius:10px;text-decoration:none;color:inherit}
.page.active{background:var(--accent,#2563eb);color:#fff;border-color:var(--accent,#2563eb)}
.page:hover:not(.active){border-color:var(--accent,#2563eb);color:var(--accent,#2563eb)}
.page-dots{padding:6px 10px;color:var(--muted)}
.inline{display:inline}
.btn-danger{background:var(--danger);border-color:var(--danger);color:#fff}
.btn-danger:hover{filter:brightness(.95)}

/* ==== Responsive ==== */
/* План: керуємо висотою хедера через змінну, а не явні height у .topbar */
@media (max-width: 768px){
  :root{ --topbar-h:88px; }
  .topbar__inner{padding:0 24px}
  .title{font-size:18px;line-height:1.08;}
  .topbar__actions .btn{height:38px}
}
@media (max-width: 414px){
  /* більше місця під лого */
  :root{ --topbar-h: 120px; } /* було 96px */

  /* лого тепер росте до межі (var(--topbar-h) - 24px) */
  .logo{
    width: clamp(90px, 26vw, calc(var(--topbar-h) - 24px));
  }
}
@media (max-width: 375px){
  :root{ --topbar-h:110px; }
  .topbar__inner{padding:0 16px;gap:12px}
  .title{
    font-size:15px;line-height:1.04;
    display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;line-clamp:3
  }
  .topbar__actions .btn{height:36px;padding:0 12px;font-size:14px}
}
@media (max-width: 320px){
  :root{ --topbar-h:120px; }
  .topbar__inner{padding:0 12px;gap:10px}
  .title{
    font-size:14px;line-height:1.02;
    display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;line-clamp:3
  }
  .topbar__actions .btn{height:34px;padding:0 10px;font-size:13px}
}

/* ==== Footer ==== */
.site-footer{
  --footer-bg: var(--primary);
  background:var(--footer-bg);color:#ffffff;
  padding:1rem 1.25rem;margin-top:2rem;
}
.site-footer__inner{
  max-width:1200px;margin:0 auto;
  display:flex;align-items:center;justify-content:space-between;gap:1rem;
  font-size:0.95rem;
}
.site-footer__left{font-weight:600}
.site-footer__right a{color:rgba(255,255,255,0.95);text-decoration:underline}

/* Mobile: фіксований футер + відступ під контент */
@media (max-width:520px){
  .site-footer__inner{flex-direction:column;align-items:flex-start}
  .site-footer__right{margin-top:.5rem}
  .site-footer{
    position:fixed;left:0;right:0;bottom:0;width:100%;z-index:50;
    border-top:1px solid rgba(255,255,255,0.06);
    padding:.75rem 1rem;
  }
  body{padding-bottom:72px}
}

  /* === Revocation status styles === */
  .badge{display:inline-block;padding:2px 6px;border-radius:6px;font-size:12px;line-height:1.2;font-weight:600}
  .badge-danger{background:#dc2626;color:#fff}
  .badge-success{background:#15803d;color:#fff}
  .row-revoked td{background:#fff1f1}

  /* Sortable table header links: force neutral styling across states */
  .table th a,
  .table th a:link,
  .table th a:visited{
    color:inherit;
    text-decoration:none;
    font-weight:600;
    display:inline-flex;align-items:center;gap:6px;white-space:nowrap;line-height:1;
  }
  /* Tiny sort icon next to header text */
  .table th a .sort-icon{
    display:inline-block;
    width:12px; height:12px;
    margin-left:0;
    vertical-align:middle;
  }
  .table th a:hover,
  .table th a:focus,
  .table th a:active{ text-decoration:underline dotted; color:inherit; }
  /* In case browser applies default focus outline, keep accessibility */
  .table th a.active{ font-weight:bold; color:var(--accent,#2563eb); }

  /* === Utility classes (CSP inline-style cleanup) === */
  .mt-0{margin-top:0}
  .mb-12{margin-bottom:12px}
  .mt-14{margin-top:14px}
  .mt-24{margin-top:24px}
  .mr-8{margin-right:8px}
  /* Accent utilities */
  .text-accent{color:var(--accent,#2563eb)!important}
  .bg-accent{background:var(--accent,#2563eb)!important;color:#fff}
  .btn-accent{background:var(--accent,#2563eb);border-color:var(--accent,#2563eb);color:#fff}
  .btn-accent:hover{filter:brightness(.92)}
  .link-accent{color:var(--accent,#2563eb);text-decoration:none}
  .link-accent:hover,.link-accent:focus{text-decoration:underline}
  .flex{display:flex}
  .flex-wrap{flex-wrap:wrap}
  .flex-col{flex-direction:column}
  /* === Operator create form layout === */
  .op-create-grid{display:flex;flex-wrap:wrap;gap:14px 14px;align-items:flex-end}
  .op-create-grid .op-field{display:flex;flex-direction:column;gap:6px;min-width:200px;flex:1 1 200px}
  .op-create-grid .op-field input{font-size:14px}
  .op-create-grid .op-actions{display:flex;flex-direction:column;gap:6px;min-width:140px}
  .op-create-btn{height:44px;padding:10px 18px;font-weight:600}
  .gap-6{gap:6px}
  .gap-8{gap:8px}
  .gap-10{gap:10px}
  .align-start{align-items:flex-start}
  .align-center{align-items:center}
  .align-self-end{align-self:flex-end}
  .nowrap{white-space:nowrap}
  /* Expiry block layout */
  .expiry-row{display:flex;align-items:center;gap:14px;min-height:38px;flex-wrap:nowrap}
  .expiry-row .expiry-slot{transition:opacity .18s ease, visibility .18s ease;}
  .hidden-slot{opacity:0;visibility:hidden;pointer-events:none;position:relative}
  /* Reserve width so layout doesn't shift when showing date input */
  #validUntilWrap{width:170px}
  #validUntilWrap input[type=date]{width:100%;padding:8px 10px;border:1px solid var(--border);border-radius:10px;font-size:14px}
  .d-inline{display:inline-block}
  .d-none{display:none}
  .mono{font-family:monospace}
  .fs-11{font-size:11px}
  .fs-12{font-size:12px}
  .fs-13{font-size:13px}
  .fs-14{font-size:14px}
  .minw-200{min-width:200px}
  .maxw-760{max-width:760px}
  .link-plain{text-decoration:none;color:inherit}
  .filter-form{margin-bottom:12px;display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .details-grid{display:grid;grid-template-columns:160px 1fr;gap:12px;font-size:14px}
  .actions-row{display:flex;flex-wrap:wrap;gap:12px;align-items:flex-start}
  .flex-1{flex:1}
  .btn-ghost-danger{background:#64748b;color:#fff;border-color:#64748b}
  .alert-ok{background:#ecfdf5;border:1px solid #6ee7b7}
  /* Do not force casing on success message (name display uses JS title-casing) */
  #ownResult .alert-ok{ text-transform:none; }
  .ellipsis{max-width:200px;overflow:hidden;text-overflow:ellipsis}
  .badge-int{font-size:13px;user-select:all}
  .text-muted{color:var(--muted)}
  .text-success{color:#15803d}
  .text-warning{color:#b45309}
  /* QR benchmark table (CSP-safe) */
  .qr-bench-head{border-bottom:1px solid silver}
  .qr-bench-title{text-align:center;font-weight:600}
  .qr-bench-label{text-align:right;white-space:nowrap}
  .qr-bench-total{border-top:2px solid #000}
  .my-18{margin:18px 0}
  .mt-10{margin-top:10px}
  .mt-18{margin-top:18px}
  .mb-0{margin-bottom:0}
  .fw-600{font-weight:600}
  .mb-12{margin-bottom:12px}
  .mb-8{margin-bottom:8px}
  .mt-8{margin-top:8px}
  .mt-4{margin-top:4px}
  .mt-2{margin-top:2px}
  .maxw-520{max-width:520px}
  .code-box{display:block;max-width:340px;white-space:pre-wrap;word-break:break-all;font-size:11px;background:#f1f5f9;padding:8px;border-radius:6px}
  .canvas-preview{border:1px solid #e2e8f0;border-radius:8px;max-width:100%;height:auto;display:block}
  .qr-img{width:220px;height:220px;border:1px solid #e2e8f0;border-radius:8px;object-fit:contain}
  /* Branding previews */
  .branding-preview{display:inline-block;border:1px solid var(--border);background:#fff;border-radius:8px;padding:4px;overflow:hidden}
  .branding-preview--logo{width:140px;height:140px;display:flex;align-items:center;justify-content:center}
  .branding-preview--logo img{max-width:100%;max-height:100%;object-fit:contain;display:block}
  .branding-preview--favicon{width:64px;height:64px;display:flex;align-items:center;justify-content:center}
  .branding-preview--favicon img{max-width:100%;max-height:100%;object-fit:contain;display:block}
  /* Bulk bar sticky */
  .bulk-bar{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);padding:4px 10px;z-index:6;box-shadow:0 2px 4px rgba(0,0,0,0.04);min-height:40px;display:flex;align-items:center}
  body.admin-page .bulk-bar{top:0}
  /* When bulk bar visible adjust sticky header offset */
  body.has-bulk .table thead th{top:40px}
  .bulk-bar__inner{align-items:center}
  .row-selected td{background:#e0f2fe}
  /* Bulk bar reason field collapse logic */
  #bulkBar{gap:8px}
  #bulkReason{min-width:220px;}
  #bulkReason.hidden-slot{display:none}
  /* === Tabs for issuance page === */
  .tabs{display:flex;gap:4px;margin:0px 0 1px;border-bottom:1px solid var(--border)}
  .tab{background:#f1f5f9;border:1px solid var(--border);border-bottom:none;padding:8px 14px;border-top-left-radius:10px;border-top-right-radius:10px;cursor:pointer;font-weight:600;font-size:14px;position:relative;top:1px}
  .tab.active{background:#fff;border-color:var(--border);color:#000;box-shadow:0 2px 4px rgba(0,0,0,0.05)}
  .tab-panel{padding:2px 4px 8px 2px}
  .tab-panel.d-none{display:none}
  .bulk-table-wrapper{border:1px solid var(--border);border-radius:12px;padding:10px;background:#fff}
  #bulkTable input{width:100%;padding:6px 8px;border:1px solid var(--border);border-radius:8px;font-size:14px}
  #bulkTable td,#bulkTable th{vertical-align:top}
  .row-error input{border-color:#dc2626}
  .status-badge{display:inline-block;padding:2px 6px;border-radius:6px;font-size:11px;font-weight:600;line-height:1.2;background:#e2e8f0;color:#334155}
  .status-badge.ok{background:#10b981;color:#fff}
  .status-badge.err{background:#dc2626;color:#fff}
  .status-badge.proc{background:var(--accent,#2563eb);color:#fff}
  .token-chip{display:inline-block;background:#0f172a;color:#fff;padding:2px 6px;border-radius:6px;font-size:11px;font-family:monospace;margin:2px 4px 2px 0}
  #bulkResults code{font-size:12px}
  .fade-in{animation:fadeIn .3s ease}
  @keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
  /* Duplicate name highlight */
  #bulkTable tr.dup td input[name=name]{outline:2px solid #f59e0b;background:#fff8e1}
  #bulkTable tr.dup td:first-child{position:relative}
  #bulkTable tr.dup td:first-child:after{content:'dup';position:absolute;top:2px;right:2px;background:#f59e0b;color:#fff;font-size:9px;padding:1px 3px;border-radius:4px;letter-spacing:.5px}

  /* Progress bar */
  .progress-wrap{background:#e2e8f0;border-radius:6px;overflow:hidden;height:10px;position:relative}
  .progress-bar{background:var(--accent,#2563eb);height:100%;transition:width .25s ease}
  .progress-bar.done{background:#10b981}
  .progress-wrap{width:240px;max-width:100%}
  .progress-hidden{display:none}

  /* Bulk table column widths (replacing inline styles) */
  #bulkTable th.col-n{width:40px}
  #bulkTable th.col-status{width:110px}
  #bulkTable th.col-actions{width:54px}

  /* Settings page layout */
  .row {
    display: flex;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
  }
  .col-md-3, .col-md-9 {
    position: relative;
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
  }
  @media (min-width: 768px) {
    .col-md-3 {
      flex: 0 0 25%;
      max-width: 25%;
    }
    .col-md-9 {
      flex: 0 0 75%;
      max-width: 75%;
    }
  }
  .list-group {
    display: flex;
    flex-direction: column;
    padding-left: 0;
    margin-bottom: 0;
    border-radius: .25rem;
  }
  .list-group-item {
    position: relative;
    display: block;
    padding: .75rem 1.25rem;
    background-color: #fff;
    border: 1px solid rgba(0,0,0,.125);
  }
  .list-group-item:first-child {
    border-top-left-radius: inherit;
    border-top-right-radius: inherit;
  }
  .list-group-item:last-child {
    border-bottom-right-radius: inherit;
    border-bottom-left-radius: inherit;
  }
  .list-group-item-action {
    width: 100%;
    color: #495057;
    text-align: inherit;
    white-space: normal;
    word-wrap: break-word;
  }
  .list-group-item-action:hover, .list-group-item-action:focus {
    z-index: 1;
    color: #495057;
    text-decoration: none;
    background-color: #f8f9fa;
  }
  .list-group-item.active {
    z-index: 2;
    color: #fff;
    background-color: var(--primary);
    border-color: var(--primary);
  }
  .mb-20 {
    margin-bottom: 20px;
  }
  /* Settings specific tweaks */
  .settings-layout{align-items:flex-start}
  .settings-sidebar{max-width:240px}
  .settings-nav .list-group-item{white-space:normal;word-break:break-word;line-height:1.25;font-size:15px;padding:.85rem 1rem}
  /* widen and shift left by pulling container inward */
  .settings-sidebar .list-group{min-width:220px}
  @media (min-width:992px){
    .settings-layout{margin-left:0}
  }
  /* active state refinement */
  .settings-nav .list-group-item.active{font-weight:600}
  /* Horizontal settings tabs */
  /* Reduced bottom padding to pull panel closer to tabs (was 32px) */
  .settings-tabs-wrapper{max-width:920px;margin:0 auto;padding:4px 4px 18px 4px}
  .settings-tabs .tab{min-width:140px;text-align:center}
  /* Reduced top padding from 18px to 14px to tighten visual gap below tabs */
  .settings-panel{background:#fff;border:1px solid var(--border);border-top:none;padding:14px 22px 18px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.04)}
  .settings-panel{width:100%;}
  .settings-panel__inner{max-width:1100px;margin:0 auto;}
  .settings-panel__content{max-width:760px;margin:0 auto;}
  /* Ensure empty tabs still reserve vertical space */
  .settings-panel__content:empty{min-height:120px;display:block}
  .settings-tabs .tab{user-select:none}
  .settings-tabs .tab.active{position:relative}
  /* Accent underline on active horizontal settings tab */
  .settings-tabs .tab.active:after{content:"";position:absolute;left:10px;right:10px;bottom:-1px;height:3px;background:var(--accent,#2563eb);border-radius:3px 3px 0 0}
  /* Color picker pairing */
  .color-picker{width:46px;height:38px;padding:0;border:1px solid var(--border);border-radius:8px;background:#fff;cursor:pointer}
  .color-picker::-webkit-color-swatch-wrapper{padding:0;border-radius:8px}
  .color-picker::-webkit-color-swatch{border:none;border-radius:8px}
  .color-picker::-moz-color-swatch{border:none;border-radius:8px}
  .color-hex{font-family:monospace}
  /* Spacing utilities */
  .ml-4{margin-left:4px}
  .ml-6{margin-left:6px}
  .btn-cluster .btn + .btn{margin-left:6px}
  /* Ensure consistent panel width across settings tabs even when empty */
  .settings-panel{min-height:260px;}
  @media (min-width:640px){
  /* unified via inner container now */
  }
  /* Narrow text under color fields */
  .color-field + .text-muted{display:block;margin-top:4px}
  /* Password field with eye toggle */
  .pw-field{position:relative;display:flex;align-items:stretch}
  .pw-field input[type=password],
  .pw-field input[type=text]{padding-right:44px}
  .pw-toggle{position:absolute;right:6px;top:50%;transform:translateY(-50%);border:0;background:transparent;cursor:pointer;padding:4px 6px;font-size:16px;line-height:1;border-radius:6px}
  .pw-toggle:focus-visible{outline:2px solid var(--accent,#2563eb);}
  .pw-toggle[aria-pressed=true]{background:#e2e8f0}
  /* Password strength meter */
  .pw-strength{display:block;margin-top:4px;margin-bottom:6px}
  /* Organization create grid (align with branding spacing) */
  .org-create-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px 18px;align-items:start}
  .org-create-grid label{font-size:14px;line-height:1.25;font-weight:500;display:flex;flex-direction:column;gap:6px}
  .org-create-grid input[type=text],
  .org-create-grid input[type=file]{font-size:14px}
  .org-create-grid .col-span-2{grid-column:1/-1}
  .w-260{width:260px;max-width:100%}
  /* Color dots in organization table */
  .color-dot{display:inline-block;width:18px;height:18px;border-radius:6px;border:1px solid var(--border);background:var(--c,#ccc);position:relative}
  .color-dot:after{content:"";position:absolute;inset:0;border-radius:6px;box-shadow:inset 0 0 0 2px rgba(255,255,255,0.5)}
  /* SVG-based alternative (CSP-safe, no inline styles) */
  .color-dot-svg{width:18px;height:18px;display:inline-block;border-radius:6px;border:1px solid var(--border)}
  .color-dot-svg circle{stroke:rgba(255,255,255,0.5);stroke-width:2}
  .badge.ok{background:#15803d;color:#fff}
  .badge.off{background:#64748b;color:#fff}
  /* Specific template status variants (inactive vs archived) */
  .badge-status-active{background:#15803d;color:#fff}
  .badge-status-inactive{background:#64748b;color:#fff}
  .badge-status-archived{background:#92400e;color:#fff}
  .btn-xs{padding:4px 8px;font-size:12px;border-radius:8px}
  /* Template tiny preview thumbnails */
  .tpl-prev{width:32px;min-width:32px;text-align:center}
  .tpl-prev-img{width:30px;height:30px;object-fit:cover;border:1px solid var(--border);border-radius:3px;display:inline-block;image-rendering:-webkit-optimize-contrast;cursor:zoom-in;box-shadow:0 0 0 1px #fff;}
  .tpl-prev-img:hover{outline:2px solid var(--accent,#2563eb);}
  /* Larger preview dialog image */
  .tpl-big-prev{max-width:90vw;max-height:80vh;display:block;border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 18px rgba(0,0,0,.25);}
  dialog.tpl-prev-dialog{border:0;padding:14px 18px;border-radius:14px;background:#fff;}
  dialog.tpl-prev-dialog::backdrop{background:rgba(0,0,0,.45)}
  /* Image preview fixed width used on template.php */
  .img-preview-480{max-width:480px;border:1px solid var(--border);border-radius:8px;height:auto;display:block}
/* NOTE: Removed temporary canonical override with !important for .topbar__actions .btn
   (kept single definition near top). This comment left intentionally for audit trace. */

/* === Operators (Users tab) === */
.op-form{width:100%;}
.op-fields{width:100%;}
.op-field{flex:1 1 160px;min-width:200px;display:flex;flex-direction:column;}
.op-actions{padding-bottom:10px;}
.op-status{min-width:180px;display:inline-block;}
/* Operators table column widths (CSP-safe, replaces inline styles) */
#operatorsTable th.col-id{width:50px}
#operatorsTable th.col-role{width:120px}
#operatorsTable th.col-status{width:120px}
#operatorsTable th.col-actions{width:260px}
#templatesTable th.col-actions{width:60px}
#templatesTable th.col-code{width:140px}
#templatesTable th.col-org{width:80px}

/* === Template coordinates editor === */
.coords-editor-block{margin-bottom:32px;padding:20px;border:1px solid var(--border);border-radius:12px;background:#fff;box-shadow:0 10px 24px rgba(15,23,42,.08)}
.coords-editor{display:flex;flex-wrap:wrap;gap:24px;align-items:flex-start}
.coords-editor__stage{flex:1 1 520px;max-width:780px}
.coords-editor__stage-inner{position:relative;width:100%}
.coords-editor__bg{display:block;width:100%;height:auto;border-radius:12px;border:1px solid rgba(15,23,42,.08);box-shadow:0 8px 26px rgba(15,23,42,.12)}
.coords-editor__overlay{position:absolute;inset:0;pointer-events:none}
.coords-editor__overlay .coords-marker{pointer-events:auto}
.coords-editor__panel{flex:0 0 260px;max-width:320px;min-height:320px;background:#f8fafc;border:1px solid rgba(148,163,184,.35);border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:14px}
.coords-editor__grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;align-items:end}
.coords-editor__grid .is-disabled{opacity:.5;pointer-events:none;cursor:default}
.coords-editor__grid input.is-disabled{background:#e2e8f0;border-color:rgba(148,163,184,.6)}
.coords-editor__hint{min-height:18px}
.coords-editor__actions{margin-top:16px;display:flex;gap:12px;flex-wrap:wrap;align-items:center}
.coords-editor__status{min-width:180px;font-size:12px;color:#475569}
.coords-marker{position:absolute;cursor:grab;transform:translate(-7px,-7px);color:#f8fafc;font-size:11px;font-weight:600;text-shadow:0 1px 3px rgba(15,23,42,.6);min-width:14px;min-height:14px}
.coords-marker::before{content:"";position:absolute;top:0;left:0;width:14px;height:14px;border-radius:4px;background:rgba(37,99,235,.85);border:2px solid rgba(255,255,255,.95);box-shadow:0 2px 8px rgba(15,23,42,.45)}
.coords-marker__label{position:absolute;top:18px;left:0;background:rgba(15,23,42,.85);padding:2px 6px;border-radius:6px;white-space:nowrap;pointer-events:none}
.coords-marker--qr{transform:none}
.coords-marker--qr::before{display:none}
.coords-marker__qr-box{position:absolute;top:0;left:0;min-width:12px;min-height:12px;border:2px dashed rgba(37,99,235,.8);background:rgba(37,99,235,.12);box-shadow:0 0 0 1px rgba(15,23,42,.25) inset;border-radius:6px}
.coords-marker--qr .coords-marker__label{top:-26px}
.coords-marker--text{transform:none;cursor:move;color:#e2e8f0}
.coords-marker--text::before{top:auto;bottom:-8px;left:-8px;width:16px;height:16px;border-radius:50%;background:rgba(37,99,235,.9);box-shadow:0 2px 6px rgba(15,23,42,.45)}
.coords-marker__text-box{position:absolute;top:0;left:0;min-width:28px;min-height:18px;border:2px dashed rgba(59,130,246,.78);background:rgba(59,130,246,.12);border-radius:8px;pointer-events:none;transition:border-color .15s ease,background-color .15s ease;box-sizing:border-box;display:flex;align-items:flex-start;justify-content:flex-start;padding:4px 6px;overflow:visible}
.coords-marker__placeholder{display:block;width:100%;color:rgba(30,41,59,.88);font-size:12px;line-height:1.25;font-weight:500;pointer-events:none;white-space:normal;word-break:break-word;transform-origin:0 0;transition:color .15s ease}
.coords-marker--text .coords-marker__label{top:auto;bottom:-26px;background:rgba(15,23,42,.9)}
.coords-marker--text .coords-marker__placeholder{mix-blend-mode:multiply}
.coords-marker--text::after{content:"";position:absolute;left:0;right:0;bottom:-2px;height:2px;background:rgba(15,23,42,.45);pointer-events:none}
.coords-marker.is-active::before{background:#f59e0b}
.coords-marker.is-active .coords-marker__label{background:rgba(250,204,21,.92);color:#312e81}
.coords-marker--text.is-active .coords-marker__text-box{border-color:rgba(249,115,22,.9);background:rgba(249,115,22,.12)}
.coords-marker--text.is-active .coords-marker__placeholder{color:rgba(79,70,229,.95)}
.coords-marker--text.is-active::after{background:rgba(249,115,22,.85)}
.coords-marker:active{cursor:grabbing}
.coords-marker.dragging::before{background:#f97316}
.coords-editor__panel select[hidden],
.coords-editor__panel input[hidden],
.coords-editor__panel label[hidden]{display:none!important}
@media (max-width:1024px){
  .coords-editor{flex-direction:column}
  .coords-editor__panel{width:100%;max-width:none}
  .coords-editor__stage{width:100%}
}
